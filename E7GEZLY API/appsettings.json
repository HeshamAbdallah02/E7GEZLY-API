{
  "ConnectionStrings": {
    "DefaultConnection": "Server=LAPTOP-V8R4T203\\SQLEXPRESS;Database=E7GEZLY;Trusted_Connection=True;TrustServerCertificate=True;"
  },
  "Jwt": {
    "Key": "8dd98f147f72f2f39dd96d6a24b0588b",
    "Issuer": "https://localhost:5001",
    "Audience": "https://localhost:5001"
  },
  "VenueSubUsers": {
    "PasswordPolicy": {
      "RequiredLength": 8,
      "RequireDigit": true,
      "RequireUppercase": true,
      "RequireLowercase": true,
      "RequireNonAlphanumeric": false
    },
    "Lockout": {
      "MaxFailedAttempts": 5,
      "LockoutDurationMinutes": 30
    },
    "Sessions": {
      "AllowMultipleSessions": true,
      "MaxSessionsPerUser": 5
    }
  },
  "Authentication": {
    "Apple": {
      "ClientId": "com.e7gezly.app",
      "TeamId": "YOUR_TEAM_ID",
      "KeyId": "YOUR_KEY_ID",
      "PrivateKey": "-----BEGIN PRIVATE KEY-----\nYOUR_PRIVATE_KEY_HERE\n-----END PRIVATE KEY-----"
    }
  },
  "Email": {
    "FromEmail": "hesham.abdalla2002@gmail.com",
    "FromName": "E7GEZLY",
    "DefaultLanguage": "ar"
  },
  "Logging": {
    "LogLevel": {
      "Default": "Information",
      "Microsoft.AspNetCore": "Warning"
    }
  },
  "Geocoding": {
    "Provider": "Nominatim",
    "Nominatim": {
      "BaseUrl": "https://nominatim.openstreetmap.org",
      "UserAgent": "E7GEZLY/1.0 (contact@e7gezly.com)",
      "RequestsPerSecond": 1,
      "TimeoutSeconds": 30,
      "CacheDurationHours": 24
    },
    "EnableCaching": true,
    "FallbackToNearestDistrict": true,
    "MaxDistanceKm": 20
  },
  "IpRateLimiting": {
    "EnableEndpointRateLimiting": true,
    "StackBlockedRequests": false,
    "RealIpHeader": "X-Real-IP",
    "ClientIdHeader": "X-ClientId",
    "HttpStatusCode": 429,
    "GeneralRules": [
      {
        "Endpoint": "*",
        "Period": "1m",
        "Limit": 60,
        "RuleName": "general"
      },
      {
        "Endpoint": "*:/api/auth/*/login",
        "Period": "5m",
        "Limit": 5,
        "RuleName": "login"
      },
      {
        "Endpoint": "*:/api/auth/password/request-reset",
        "Period": "1h",
        "Limit": 3,
        "RuleName": "password-reset"
      },
      {
        "Endpoint": "*:/api/auth/verify",
        "Period": "5m",
        "Limit": 10,
        "RuleName": "verification"
      },
      {
        "Endpoint": "*:/api/auth/*/register",
        "Period": "1h",
        "Limit": 5,
        "RuleName": "registration"
      },
      {
        "Endpoint": "GET:/api/venue/*",
        "Period": "1m",
        "Limit": 120,
        "RuleName": "venue-browsing"
      },
      {
        "Endpoint": "POST:/api/booking/*",
        "Period": "5m",
        "Limit": 5,
        "RuleName": "booking-creation"
      }
    ]
  },

  "IpRateLimitPolicies": {
    "IpRules": [
      {
        "Ip": "127.0.0.1",
        "Rules": [
          {
            "Endpoint": "*",
            "Period": "1m",
            "Limit": 1000
          }
        ]
      }
    ]
  },
  "DistributedCache": {
    "ConnectionString": "localhost:6379,abortConnect=false",
    "InstanceName": "E7GEZLY",
    "DefaultExpirationMinutes": 60,
    "Durations": {
      "LocationDataMinutes": 1440,
      "VenueDetailsMinutes": 30,
      "VenueSearchMinutes": 15,
      "UserSessionMinutes": 240,
      "RateLimitMinutes": 60,
      "GeocodingResultDays": 7
    },
    "Features": {
      "EnableLocationCache": true,
      "EnableVenueCache": true,
      "EnableSessionCache": true,
      "EnableRateLimitCache": true,
      "EnableGeocodingCache": true
    }
  },
  "AllowedHosts": "*"
}