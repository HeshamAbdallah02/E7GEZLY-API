### E7GEZLY Password Reset API Tests
### Base URL
@baseUrl = https://localhost:7194/api
@contentType = application/json

### 1. Initiate Password Reset (forgot password)
POST {{baseUrl}}/auth/password/forgot
Content-Type: {{contentType}}

{
  "identifier": "01012345678", // or email
  "userType": 0 // 0 = Customer, 1 = Venue
}

### 2. Check Available Reset Methods
GET {{baseUrl}}/auth/password/check-reset-methods/user-id-here

### 3. Validate Reset Code
POST {{baseUrl}}/auth/password/validate-code
Content-Type: {{contentType}}

{
  "userId": "user-id-here",
  "resetCode": "123456",
  "method": 0 // 0 = Phone, 1 = Email
}

### 4. Reset Password
POST {{baseUrl}}/auth/password/reset
Content-Type: {{contentType}}

{
  "userId": "user-id-here",
  "resetCode": "123456",
  "method": 0, // 0 = Phone, 1 = Email
  "newPassword": "NewPassword123!",
  "confirmPassword": "NewPassword123!"
}

### Test Flow Examples:

### Customer Password Reset Flow - Email
POST {{baseUrl}}/auth/password/forgot
Content-Type: {{contentType}}

{
  "identifier": "customer@example.com",
  "userType": 0
}

###
POST {{baseUrl}}/auth/password/validate-code
Content-Type: {{contentType}}

{
  "userId": "replace-with-actual-user-id",
  "resetCode": "replace-with-actual-code",
  "method": 1
}

###
POST {{baseUrl}}/auth/password/reset
Content-Type: {{contentType}}

{
  "userId": "replace-with-actual-user-id",
  "resetCode": "replace-with-actual-code",
  "method": 1,
  "newPassword": "NewPassword123!",
  "confirmPassword": "NewPassword123!"
}

### Customer Password Reset Flow - Phone
POST {{baseUrl}}/auth/password/forgot
Content-Type: {{contentType}}

{
  "identifier": "01012345678",
  "userType": 0
}

###
POST {{baseUrl}}/auth/password/validate-code
Content-Type: {{contentType}}

{
  "userId": "replace-with-actual-user-id",
  "resetCode": "replace-with-actual-code",
  "method": 0
}

###
POST {{baseUrl}}/auth/password/reset
Content-Type: {{contentType}}

{
  "userId": "replace-with-actual-user-id",
  "resetCode": "replace-with-actual-code",
  "method": 0,
  "newPassword": "NewPassword123!",
  "confirmPassword": "NewPassword123!"
}

### Venue Password Reset Flow - Email
POST {{baseUrl}}/auth/password/forgot
Content-Type: {{contentType}}

{
  "identifier": "venue@example.com",
  "userType": 1
}

### Error Test Cases:

### Invalid email format
POST {{baseUrl}}/auth/password/forgot
Content-Type: {{contentType}}

{
  "identifier": "invalid-email",
  "userType": 0
}

### Invalid phone format
POST {{baseUrl}}/auth/password/forgot
Content-Type: {{contentType}}

{
  "identifier": "123", // too short
  "userType": 0
}

### Wrong user type
POST {{baseUrl}}/auth/password/forgot
Content-Type: {{contentType}}

{
  "identifier": "customer@example.com",
  "userType": 1 // claiming venue but it's customer
}

### Invalid reset code
POST {{baseUrl}}/auth/password/validate-code
Content-Type: {{contentType}}

{
  "userId": "valid-user-id",
  "resetCode": "wrong-code",
  "method": 0
}

### Expired reset code
POST {{baseUrl}}/auth/password/validate-code
Content-Type: {{contentType}}

{
  "userId": "valid-user-id",
  "resetCode": "expired-code",
  "method": 0
}

### Mismatched passwords
POST {{baseUrl}}/auth/password/reset
Content-Type: {{contentType}}

{
  "userId": "valid-user-id",
  "resetCode": "valid-code",
  "method": 0,
  "newPassword": "Password123!",
  "confirmPassword": "DifferentPassword!"
}

### Weak password
POST {{baseUrl}}/auth/password/reset
Content-Type: {{contentType}}

{
  "userId": "valid-user-id",
  "resetCode": "valid-code",
  "method": 0,
  "newPassword": "123", // too weak
  "confirmPassword": "123"
}